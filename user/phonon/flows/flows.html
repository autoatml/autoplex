
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Out-of-the-box workflow &#8212; autoplex</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=1ea92b8b" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../_static/documentation_options.js?v=50bc2716"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module">
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";
window.addEventListener("load", () => mermaid.run());
</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/phonon/flows/flows';</script>
    <link rel="icon" href="../../../_static/autoplex_favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Generating reference data" href="generation/data.html" />
    <link rel="prev" title="Phonon workflow" href="../index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1.dev1+gbfc95092b" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/autoplex_logo.png" class="logo__image only-light" alt="autoplex - Home"/>
    <img src="../../../_static/autoplex_logo.png" class="logo__image only-dark pst-js-only" alt="autoplex - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Overview</a></li>




<li class="toctree-l1"><a class="reference internal" href="../../setup.html">Quick-start</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../tutorials.html">Tutorials</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../installation/installation.html">Installation guide</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../rss/index.html">RSS workflow</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../rss/flow/introduction/intro.html">Brief overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../rss/flow/input/input.html">Input YAML configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../rss/flow/quick_start/start.html">Quick start</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../rss/flow/example/example.html">Examples</a></li>
</ul>
</details></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../index.html">Phonon workflow</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Out-of-the-box workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="generation/data.html">Generating reference data</a></li>
<li class="toctree-l3"><a class="reference internal" href="fitting/fitting.html">Fitting phonon-accurate potentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="benchmark/benchmark.html">Benchmark of ML-based phonon structure</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../executable/index.html">Executable tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../executable/tutorial_phonon.html">Iterative DFT vs MLIP benchmark workflow for phonons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../executable/tutorial_rss.html">RSS Workflow</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../reference/index.html">API reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../reference/autoplex.auto.html">autoplex.auto</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../reference/autoplex.auto.phonons.html">autoplex.auto.phonons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.auto.phonons.flows.html">autoplex.auto.phonons.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.auto.phonons.jobs.html">autoplex.auto.phonons.jobs</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../reference/autoplex.auto.rss.html">autoplex.auto.rss</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.auto.rss.flows.html">autoplex.auto.rss.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.auto.rss.jobs.html">autoplex.auto.rss.jobs</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../reference/autoplex.benchmark.html">autoplex.benchmark</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../reference/autoplex.benchmark.phonons.html">autoplex.benchmark.phonons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.benchmark.phonons.flows.html">autoplex.benchmark.phonons.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.benchmark.phonons.jobs.html">autoplex.benchmark.phonons.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.benchmark.phonons.utils.html">autoplex.benchmark.phonons.utils</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.benchmark.rss.html">autoplex.benchmark.rss</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../reference/autoplex.data.html">autoplex.data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../reference/autoplex.data.common.html">autoplex.data.common</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.data.common.flows.html">autoplex.data.common.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.data.common.jobs.html">autoplex.data.common.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.data.common.utils.html">autoplex.data.common.utils</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../reference/autoplex.data.phonons.html">autoplex.data.phonons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.data.phonons.flows.html">autoplex.data.phonons.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.data.phonons.jobs.html">autoplex.data.phonons.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.data.phonons.utils.html">autoplex.data.phonons.utils</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../reference/autoplex.data.rss.html">autoplex.data.rss</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.data.rss.flows.html">autoplex.data.rss.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.data.rss.jobs.html">autoplex.data.rss.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.data.rss.utils.html">autoplex.data.rss.utils</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../reference/autoplex.fitting.html">autoplex.fitting</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../reference/autoplex.fitting.common.html">autoplex.fitting.common</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.fitting.common.flows.html">autoplex.fitting.common.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.fitting.common.jobs.html">autoplex.fitting.common.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.fitting.common.regularization.html">autoplex.fitting.common.regularization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.fitting.common.utils.html">autoplex.fitting.common.utils</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.fitting.phonons.html">autoplex.fitting.phonons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.fitting.rss.html">autoplex.fitting.rss</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../reference/autoplex.misc.html">autoplex.misc</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../reference/autoplex.misc.castep.html">autoplex.misc.castep</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.misc.castep.flows.html">autoplex.misc.castep.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.misc.castep.jobs.html">autoplex.misc.castep.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.misc.castep.run.html">autoplex.misc.castep.run</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.misc.castep.schema.html">autoplex.misc.castep.schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.misc.castep.utils.html">autoplex.misc.castep.utils</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../reference/autoplex.misc.utils.html">autoplex.misc.utils</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/autoplex.misc.utils.mock_castep.html">autoplex.misc.utils.mock_castep</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../reference/autoplex.settings.html">autoplex.settings</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.AutoplexBaseModel.html">AutoplexBaseModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.AutoplexSettings.html">AutoplexSettings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.BcurParams.html">BcurParams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.BuildcellOptions.html">BuildcellOptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.CustomIncar.html">CustomIncar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.GAPGeneralSettings.html">GAPGeneralSettings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.GAPSettings.html">GAPSettings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.JACESettings.html">JACESettings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.LossCoeff.html">LossCoeff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.M3GNETSettings.html">M3GNETSettings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.MACESettings.html">MACESettings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.MLIPHypers.html">MLIPHypers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.NEPSettings.html">NEPSettings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.NEQUIPSettings.html">NEQUIPSettings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.Nonlinearity.html">Nonlinearity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.ResumeFromPreviousState.html">ResumeFromPreviousState</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.RssConfig.html">RssConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.SETTINGS.html">SETTINGS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.SoapParas.html">SoapParas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.SoapSettings.html">SoapSettings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.ThreebSettings.html">ThreebSettings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/autoplex.settings.TwobSettings.html">TwobSettings</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributing Guide</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../dev/contributing.html">Contributing to autoplex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/dev_install.html">Developer Installation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../about/changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/license.html">License</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/JaGeo/autoplex" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/JaGeo/autoplex/issues/new?title=Issue%20on%20page%20%2Fuser/phonon/flows/flows.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/user/phonon/flows/flows.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Out-of-the-box workflow</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#phonon-accurate-machine-learned-potentials-workflow">Phonon-accurate machine-learned potentials workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general-workflow">General workflow</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#before-running-the-workflow">Before running the workflow</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-dft-run-times-and-memory-requirements">Test DFT run times and memory requirements</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#now-start-the-workflow">Now start the workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output-and-results">Output and results</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#iterative-version-of-the-default-workflow">Iterative version of the default workflow</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="out-of-the-box-workflow">
<span id="flows"></span><h1>Out-of-the-box workflow<a class="headerlink" href="#out-of-the-box-workflow" title="Link to this heading">#</a></h1>
<section id="phonon-accurate-machine-learned-potentials-workflow">
<h2>Phonon-accurate machine-learned potentials workflow<a class="headerlink" href="#phonon-accurate-machine-learned-potentials-workflow" title="Link to this heading">#</a></h2>
<p>This tutorial will demonstrate how to use <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> with its default setup and settings.</p>
<blockquote>
<div><p>ℹ️ The default setting might not be sufficient or not suitable in any other way for your calculations. Carefully check your results with the default setup and adjust the settings when needed.</p>
</div></blockquote>
</section>
<section id="general-workflow">
<h2>General workflow<a class="headerlink" href="#general-workflow" title="Link to this heading">#</a></h2>
<p>The complete workflow of <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> involves the data generation
(including the execution of VASP calculations),
the fitting of the machine-learned interatomic potential (MLIP) and the benchmark to the DFT results.</p>
<p>We also have an iterative version of this workflow that reruns the complete workflow until a certain quality of the phonons is reached. It is described below.</p>
<section id="before-running-the-workflow">
<h3>Before running the workflow<a class="headerlink" href="#before-running-the-workflow" title="Link to this heading">#</a></h3>
<p>As a first step, you should check if our algorithm can generate supercells that are small enough to be treated with DFT
(not too many atoms) and large enough to result into reliable phonon properties.
To do so, you can use the following function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mp_api.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">MPRester</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">autoplex.data.phonons.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">check_supercells</span>


<span class="c1"># first you can download structures from the Materials Project</span>
<span class="n">mpr</span> <span class="o">=</span> <span class="n">MPRester</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;YOUR_MP_API_KEY&#39;</span><span class="p">)</span>
<span class="n">structure_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">mpids</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mp-149&quot;</span><span class="p">,</span><span class="s2">&quot;mp-165&quot;</span><span class="p">,</span><span class="s2">&quot;mp-168&quot;</span><span class="p">,</span><span class="s2">&quot;mp-16220&quot;</span><span class="p">,</span><span class="s2">&quot;mp-571520&quot;</span><span class="p">,</span><span class="s2">&quot;mp-971661&quot;</span><span class="p">,</span><span class="s2">&quot;mp-971662&quot;</span><span class="p">,</span><span class="s2">&quot;mp-999200&quot;</span><span class="p">,</span> <span class="s2">&quot;mp-1072544&quot;</span><span class="p">,</span> <span class="s2">&quot;mp-1079297&quot;</span><span class="p">,</span> <span class="s2">&quot;mp-1095269&quot;</span><span class="p">,</span> <span class="s2">&quot;mp-1200830&quot;</span><span class="p">,</span> <span class="s2">&quot;mp-1203790&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">mpid</span> <span class="ow">in</span> <span class="n">mpids</span><span class="p">:</span>
    <span class="n">structure</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_structure_by_material_id</span><span class="p">(</span><span class="n">mpid</span><span class="p">)</span>
    <span class="n">structure_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">structure</span><span class="p">)</span>


<span class="c1"># then you can use the check_supercells function</span>
<span class="n">check_supercells</span><span class="p">(</span><span class="n">structure_list</span><span class="p">,</span> <span class="n">mpids</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">fallback_min_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">min_atoms</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">max_atoms</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">check_supercells</span></code> will list all structures that should likely be excluded.
However, please carefully check yourself as your local memory requirements might be different.
Remove all structures which you cannot treat computationally
(e.g., structures with lattice parameters larger than 25 Å or more than 500 atoms).</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">MPRester</span></code> is a convenient way to draw structures from the Materials Project database using their MP-ID.</p>
</section>
<section id="test-dft-run-times-and-memory-requirements">
<h3>Test DFT run times and memory requirements<a class="headerlink" href="#test-dft-run-times-and-memory-requirements" title="Link to this heading">#</a></h3>
<p>To get a rough estimate of DFT requirements for the supercells that you have chosen, you can use the <code class="docutils literal notranslate"><span class="pre">DFTSupercellSettingsMaker</span></code>
to test the DFT run times for an undisplaced supercell of a similar size to the ones we will use in the overall workflow.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">jobflow.core.flow</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mp_api.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">MPRester</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">autoplex.auto.phonons.flows</span><span class="w"> </span><span class="kn">import</span> <span class="n">DFTSupercellSettingsMaker</span>

<span class="n">mpr</span> <span class="o">=</span> <span class="n">MPRester</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;YOUR_MP_API_KEY&#39;</span><span class="p">)</span>
<span class="n">structure_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">benchmark_structure_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">mpids</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mp-22905&quot;</span><span class="p">]</span>  
<span class="c1"># you can put as many mpids as needed e.g. mpids = [&quot;mp-22905&quot;, &quot;mp-1185319&quot;] for all LiCl entries in the Materials Project</span>
<span class="n">mpbenchmark</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mp-22905&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">mpid</span> <span class="ow">in</span> <span class="n">mpids</span><span class="p">:</span>
    <span class="n">structure</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_structure_by_material_id</span><span class="p">(</span><span class="n">mpid</span><span class="p">)</span>
    <span class="n">structure_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">structure</span><span class="p">)</span>
<span class="k">for</span> <span class="n">mpbm</span> <span class="ow">in</span> <span class="n">mpbenchmark</span><span class="p">:</span>
    <span class="n">bm_structure</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_structure_by_material_id</span><span class="p">(</span><span class="n">mpbm</span><span class="p">)</span>
    <span class="n">benchmark_structure_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bm_structure</span><span class="p">)</span>

<span class="n">dft_supercell_check_flow</span> <span class="o">=</span> <span class="n">DFTSupercellSettingsMaker</span><span class="p">()</span><span class="o">.</span><span class="n">make</span><span class="p">(</span>
    <span class="n">structure_list</span><span class="o">=</span><span class="n">structure_list</span><span class="p">,</span> <span class="n">mp_ids</span><span class="o">=</span><span class="n">mpids</span><span class="p">)</span>

<span class="n">dft_supercell_check_flow</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;tutorial&quot;</span>
<span class="n">autoplex_flow</span> <span class="o">=</span> <span class="n">dft_supercell_check_flow</span>
</pre></div>
</div>
<p>This will allow you to check whether memory requirements on your supercomputers are enough and if you might need to switch to smaller systems.</p>
</section>
</section>
<section id="now-start-the-workflow">
<h2>Now start the workflow<a class="headerlink" href="#now-start-the-workflow" title="Link to this heading">#</a></h2>
<p>We will use <a class="reference external" href="https://github.com/materialsproject/jobflow">jobflow</a> to control the execution of our jobs in form of flows and jobs.
The only module we need to import from <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> is the <code class="docutils literal notranslate"><span class="pre">CompleteDFTvsMLBenchmarkWorkflow</span></code>.</p>
<p>Next, we are going to construct the workflow based on the rocksalt-type LiCl (<a class="reference external" href="https://next-gen.materialsproject.org/materials/mp-22905?material_ids=mp-22905"><em>mp-22905</em></a>).
Remember to replace <code class="docutils literal notranslate"><span class="pre">YOUR_MP_API_KEY</span></code> with your personal <a class="reference external" href="https://next-gen.materialsproject.org/api#api-key">Materials Project API key</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mp_api.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">MPRester</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">autoplex.auto.phonons.flows</span><span class="w"> </span><span class="kn">import</span> <span class="n">CompleteDFTvsMLBenchmarkWorkflow</span>

<span class="n">mpr</span> <span class="o">=</span> <span class="n">MPRester</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;YOUR_MP_API_KEY&#39;</span><span class="p">)</span>
<span class="n">structure_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">benchmark_structure_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">mpids</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mp-22905&quot;</span><span class="p">]</span>  
<span class="c1"># you can put as many mpids as needed e.g. mpids = [&quot;mp-22905&quot;, &quot;mp-1185319&quot;] for all LiCl entries in the Materials Project</span>
<span class="n">mpbenchmark</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mp-22905&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">mpid</span> <span class="ow">in</span> <span class="n">mpids</span><span class="p">:</span>
    <span class="n">structure</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_structure_by_material_id</span><span class="p">(</span><span class="n">mpid</span><span class="p">)</span>
    <span class="n">structure_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">structure</span><span class="p">)</span>
<span class="k">for</span> <span class="n">mpbm</span> <span class="ow">in</span> <span class="n">mpbenchmark</span><span class="p">:</span>
    <span class="n">bm_structure</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_structure_by_material_id</span><span class="p">(</span><span class="n">mpbm</span><span class="p">)</span>
    <span class="n">benchmark_structure_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bm_structure</span><span class="p">)</span>

<span class="n">complete_flow</span> <span class="o">=</span> <span class="n">CompleteDFTvsMLBenchmarkWorkflow</span><span class="p">(</span>
    <span class="n">apply_data_preprocessing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">make</span><span class="p">(</span>
    <span class="n">structure_list</span><span class="o">=</span><span class="n">structure_list</span><span class="p">,</span> <span class="n">mp_ids</span><span class="o">=</span><span class="n">mpids</span><span class="p">,</span> 
    <span class="n">benchmark_structures</span><span class="o">=</span><span class="n">benchmark_structure_list</span><span class="p">,</span> <span class="n">benchmark_mp_ids</span><span class="o">=</span><span class="n">mpbenchmark</span><span class="p">)</span>

<span class="n">complete_flow</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;tutorial&quot;</span>
<span class="n">autoplex_flow</span> <span class="o">=</span> <span class="n">complete_flow</span>
</pre></div>
</div>
<p>The only default information we need to provide is which structures we want to calculate and use for the MLIP fitting
and which structures we want to benchmark to.
The <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> workflow will then perform automated VASP and <code class="docutils literal notranslate"><span class="pre">phonopy</span></code> calculations, MLIP fits, and benchmarks.
Of course, you can change and adjust the settings to your own needs, e.g. by setting a smaller supercell for the
<code class="docutils literal notranslate"><span class="pre">phonopy</span></code> calculations using <code class="docutils literal notranslate"><span class="pre">CompleteDFTvsMLBenchmarkWorkflow(min_length=15).make(...)</span></code>.
You can find more details on the subsequent tutorial pages.
With additional flows or jobs in the <code class="docutils literal notranslate"><span class="pre">[complete_flow]</span></code> list,
you can combine the <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> flow with other flows and jobs.
As the <code class="docutils literal notranslate"><span class="pre">mp_id</span></code> parameter is a string, you can also use any other <em>unique</em> structure object identifier instead.</p>
<p>The following workflow diagram will give you an overview of the flows and jobs in the default autoplex workflow:</p>
<pre  class="mermaid">
        flowchart TD
    becfe032-c5ca-4398-9691-0f16baacb237(external) --&gt;|'rattled_dir'| 42331e94-129c-45ef-9116-770369f6eab1(data_preprocessing_for_fitting)
    becfe032-c5ca-4398-9691-0f16baacb237(external) --&gt;|'rattled_dir'| 56cb031a-0cd7-4aa5-b857-c2c4d17e86c4(complete_benchmark_mp-22905)
    a0286b49-988f-4628-8da6-270caade44bc(external) --&gt;|'phonon_dir', 'phonon_data'| 42331e94-129c-45ef-9116-770369f6eab1(data_preprocessing_for_fitting)
    a0286b49-988f-4628-8da6-270caade44bc(external) --&gt;|'phonon_dir', 'phonon_data'| 56cb031a-0cd7-4aa5-b857-c2c4d17e86c4(complete_benchmark_mp-22905)
    3b147b9e-05ff-4823-9dbc-7f8855fa99b5(external) --&gt;|'dirs'| 42331e94-129c-45ef-9116-770369f6eab1(data_preprocessing_for_fitting)
    3b147b9e-05ff-4823-9dbc-7f8855fa99b5(external) --&gt;|'species', 'energies'| e0655654-19da-4c19-9e4e-d2a4014084db(machine_learning_fit)
    3b147b9e-05ff-4823-9dbc-7f8855fa99b5(external) --&gt;|'dirs'| 56cb031a-0cd7-4aa5-b857-c2c4d17e86c4(complete_benchmark_mp-22905)
    42331e94-129c-45ef-9116-770369f6eab1(data_preprocessing_for_fitting) --&gt;|output| e0655654-19da-4c19-9e4e-d2a4014084db(machine_learning_fit)
    e0655654-19da-4c19-9e4e-d2a4014084db(machine_learning_fit) --&gt;|'mlip_path'| 56cb031a-0cd7-4aa5-b857-c2c4d17e86c4(complete_benchmark_mp-22905)
    56cb031a-0cd7-4aa5-b857-c2c4d17e86c4(complete_benchmark_mp-22905) --&gt;|output| 56e6d111-8da3-4ae6-a69c-33632121a3d7(write_benchmark_metrics)
    becfe032-c5ca-4398-9691-0f16baacb237(rattled supercells_mp-22905)
    a0286b49-988f-4628-8da6-270caade44bc(single-atom displaced supercells_mp-22905)
    3b147b9e-05ff-4823-9dbc-7f8855fa99b5(get_iso_atom)
    subgraph 5f9b5d90-8fe0-418b-a90a-6c39371b8e04 [MLpotentialFit]
        42331e94-129c-45ef-9116-770369f6eab1(data_preprocessing_for_fitting)
        e0655654-19da-4c19-9e4e-d2a4014084db(machine_learning_fit)
    end
    56cb031a-0cd7-4aa5-b857-c2c4d17e86c4(complete_benchmark_mp-22905)
    56e6d111-8da3-4ae6-a69c-33632121a3d7(write_benchmark_metrics)
    </pre><p>The workflow starts with three flows that are supposed to generate data for our database:</p>
<ul class="simple">
<li><p>The first flow is preparing the VASP calculation for the isolated atoms (<code class="docutils literal notranslate"><span class="pre">get_iso_atom</span></code>).</p></li>
<li><p>A second flow is preparing the <code class="docutils literal notranslate"><span class="pre">phonopy</span></code> calculations to collect the VASP data from the single-atom displaced supercells (<code class="docutils literal notranslate"><span class="pre">single-atom</span> <span class="pre">displaced</span> <span class="pre">supercells_mp-22905</span></code>).</p></li>
<li><p>The third flow is constructing rattled supercells by rattling the atoms, i.e. displacing all atoms’ positions (in the default setup), preparing the VASP calculations and collecting the data for the MLIP fit (<code class="docutils literal notranslate"><span class="pre">rattled</span> <span class="pre">supercells_mp-22905</span></code>).</p></li>
</ul>
<p>After a few data preprocessing steps (<code class="docutils literal notranslate"><span class="pre">data_preprocessing_for_fitting</span></code>) to filter out data with too strong force values,
the MLIP fit (<code class="docutils literal notranslate"><span class="pre">machine_learning_fit</span></code>) is run and the resulting potential is used for the benchmark against DFT data
(<code class="docutils literal notranslate"><span class="pre">complete_benchmark_mp-22905</span></code>).</p>
<p>Finally, the result metrics are collected in form of output plots and files (<code class="docutils literal notranslate"><span class="pre">write_benchmark_metrics</span></code>).
The lines connecting two flows or jobs are showing what type of data is passed on to the next step, like “data”, “dirs” or “output”.
“Output” is a generic name for the several job outputs, e.g. the output of <code class="docutils literal notranslate"><span class="pre">rattled</span> <span class="pre">supercells_mp-22905</span></code> contains where
<code class="docutils literal notranslate"><span class="pre">data_preprocessing_for_fitting</span></code> can find the files it needs for the MLIP fit.
“Data” contains the <a class="reference external" href="https://materialsproject.github.io/atomate2/reference/atomate2.common.schemas.phonons.PhononBSDOSDoc.html#atomate2.common.schemas.phonons.PhononBSDOSDoc">phonon calculation task documents</a> and “dirs” contains the path to the directory where the jobs
were executed.
“Energies” and “species” are isolated atoms’ energies and a list of species used, and “mlip_path” is the path to the MLIP fit files.</p>
<p>The workflow diagram was automatically generated using <a class="reference external" href="https://mermaid.live/">Mermaid</a> and the job connection data collected by <code class="docutils literal notranslate"><span class="pre">jobflow</span></code>
for a simple job default setup with only one MP-ID.
You can add the following lines to your <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> submission script to generate the specific Mermaid diagram for your
own workflow setup:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">jobflow.utils.graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">to_mermaid</span>

<span class="o">...</span>

<span class="n">autoplex_flow</span> <span class="o">=</span> <span class="o">...</span>

<span class="n">graph_source</span> <span class="o">=</span> <span class="n">to_mermaid</span><span class="p">(</span><span class="n">autoplex_flow</span><span class="p">,</span> <span class="n">show_flow_boxes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">graph_source</span><span class="p">)</span>  <span class="c1"># show mermaid graph</span>
</pre></div>
</div>
<p>Then you can paste the printed text to the <a class="reference external" href="https://mermaid.live/">Mermaid Live Online FlowChart &amp; Diagrams Editor</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> workflow is easy to customize and every aspect of the workflow (data generation, MLIP fit, benchmark) is
in the control of the user as demonstrated in the subsequent tutorial pages.</p>
</section>
<section id="output-and-results">
<h2>Output and results<a class="headerlink" href="#output-and-results" title="Link to this heading">#</a></h2>
<p>The default <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> phonon workflow provides you with diagnostic and benchmark output plots and results.
Please note that the current shown results are the autoplex unit test examples and have not been produced by the tutorial settings.</p>
<p>After the MLIP fit is finished, <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> outputs the training and the testing error of the current potential that is fitted.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Training<span class="w"> </span>error<span class="w"> </span>of<span class="w"> </span>MLIP<span class="w"> </span><span class="o">(</span>eV/at.<span class="o">)</span>:<span class="w"> </span><span class="m">0</span>.0049634
Testing<span class="w"> </span>error<span class="w"> </span>of<span class="w"> </span>MLIP<span class="w"> </span><span class="o">(</span>eV/at.<span class="o">)</span>:<span class="w"> </span><span class="m">0</span>.0023569
</pre></div>
</div>
<p>“MLIP vs. DFT” plots for the energy and force values will be automatically saved which provides you with information
about the quality of your fit.
<img alt="autoplex diagnostic" src="../../../_images/energy_forces.png" />
The plot is divided into three sections. First, the energies and forces for the training data, and then for the test data is plotted. <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> also automatically filters the data according to a certain energy threshold (eV) <code class="docutils literal notranslate"><span class="pre">energy_limit=0.005</span></code> as well as a certain force threshold (ev/Å) <code class="docutils literal notranslate"><span class="pre">force_limit=0.1</span></code> to catch outliers resulting from inconsistencies in the data.
Finally, the energy and force filtered data is plotted in the third section. This can help you to figure out if there is
a problem with your data in case the MLIP fit quality does not turn out as expected.</p>
<p>At the end of each workflow run, <code class="docutils literal notranslate"><span class="pre">autoplex</span></code> also provides you with the benchmark plots for the phonon bandstructure
comparison between the ML-based (here GAP) and the DFT-based result.<br />
<img alt="autoplex default" src="../../../_images/LiCl_band_comparison.png" /></p>
<p>as well as the q-point wise phonon RMSE plot.
<img alt="autoplex default" src="../../../_images/LiCl_rmse_phonons.png" />
This will give you feedback of the overall quality of the generated ML potential.</p>
<p><code class="docutils literal notranslate"><span class="pre">autoplex</span></code> also prints the file <code class="docutils literal notranslate"><span class="pre">results_LiCl.txt</span></code> (here for the example of LiCl) with a summary of the essential
results of your workflow setup.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Potential  Structure  MPID        Displacement (Å)  RMSE (THz)  imagmodes(pot)  imagmodes(dft)  Database type   (Hyper-)Parameters
GAP        LiCl       mp-22905    0.01              0.57608     False           False           full            atom-wise f=0.1: n_sparse = 6000, SOAP delta = 0.5
</pre></div>
</div>
</section>
<section id="iterative-version-of-the-default-workflow">
<h2>Iterative version of the default workflow<a class="headerlink" href="#iterative-version-of-the-default-workflow" title="Link to this heading">#</a></h2>
<p>To systematically converge the quality of the potentials, we have built an iterative version of the default workflow <code class="docutils literal notranslate"><span class="pre">CompleteDFTvsMLBenchmarkWorkflow</span></code>. It will run the <code class="docutils literal notranslate"><span class="pre">CompleteDFTvsMLBenchmarkWorkflow</span></code> until the worst RMSE value of the benchmark structures falls under a certain value or a maximum number of repetitions is reached.</p>
<p>We allow users in the first generation to use a slightly different  workflow than in the subsequent generations. This can help to initially obtain enough structures for an MLIP fit and only slightly increase the number of structures in the next generations. Please don’t forget to deactivate the phonon data generation after the first iteration.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mp_api.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">MPRester</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">autoplex.auto.phonons.flows</span><span class="w"> </span><span class="kn">import</span> <span class="n">CompleteDFTvsMLBenchmarkWorkflow</span><span class="p">,</span> <span class="n">IterativeCompleteDFTvsMLBenchmarkWorkflow</span>

<span class="n">mpr</span> <span class="o">=</span> <span class="n">MPRester</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;YOUR_MP_API_KEY&#39;</span><span class="p">)</span>
<span class="n">structure_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">benchmark_structure_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">mpids</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mp-22905&quot;</span><span class="p">]</span>  
<span class="c1"># you can put as many mpids as needed e.g. mpids = [&quot;mp-22905&quot;, &quot;mp-1185319&quot;] for all LiCl entries in the Materials Project</span>
<span class="n">mpbenchmark</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mp-22905&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">mpid</span> <span class="ow">in</span> <span class="n">mpids</span><span class="p">:</span>
    <span class="n">structure</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_structure_by_material_id</span><span class="p">(</span><span class="n">mpid</span><span class="p">)</span>
    <span class="n">structure_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">structure</span><span class="p">)</span>
<span class="k">for</span> <span class="n">mpbm</span> <span class="ow">in</span> <span class="n">mpbenchmark</span><span class="p">:</span>
    <span class="n">bm_structure</span> <span class="o">=</span> <span class="n">mpr</span><span class="o">.</span><span class="n">get_structure_by_material_id</span><span class="p">(</span><span class="n">mpbm</span><span class="p">)</span>
    <span class="n">benchmark_structure_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bm_structure</span><span class="p">)</span>

<span class="n">complete_flow</span><span class="o">=</span><span class="n">IterativeCompleteDFTvsMLBenchmarkWorkflow</span><span class="p">(</span><span class="n">rms_max</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> 
                                                        <span class="n">complete_dft_vs_ml_benchmark_workflow_0</span><span class="o">=</span><span class="n">CompleteDFTvsMLBenchmarkWorkflow</span><span class="p">(</span>
    <span class="n">apply_data_preprocessing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_dft_phonon_struct</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">),</span> 
                                                        <span class="n">complete_dft_vs_ml_benchmark_workflow_1</span><span class="o">=</span><span class="n">CompleteDFTvsMLBenchmarkWorkflow</span><span class="p">(</span>
    <span class="n">apply_data_preprocessing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_dft_phonon_struct</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
                                                        <span class="p">)</span><span class="o">.</span><span class="n">make</span><span class="p">(</span>
    <span class="n">structure_list</span><span class="o">=</span><span class="n">structure_list</span><span class="p">,</span> <span class="n">mp_ids</span><span class="o">=</span><span class="n">mpids</span><span class="p">,</span> 
    <span class="n">benchmark_structures</span><span class="o">=</span><span class="n">benchmark_structure_list</span><span class="p">,</span> <span class="n">benchmark_mp_ids</span><span class="o">=</span><span class="n">mpbenchmark</span><span class="p">)</span>

<span class="n">complete_flow</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;tutorial&quot;</span>
<span class="n">autoplex_flow</span> <span class="o">=</span> <span class="n">complete_flow</span>
</pre></div>
</div>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Phonon workflow</p>
      </div>
    </a>
    <a class="right-next"
       href="generation/data.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Generating reference data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#phonon-accurate-machine-learned-potentials-workflow">Phonon-accurate machine-learned potentials workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general-workflow">General workflow</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#before-running-the-workflow">Before running the workflow</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-dft-run-times-and-memory-requirements">Test DFT run times and memory requirements</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#now-start-the-workflow">Now start the workflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#output-and-results">Output and results</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#iterative-version-of-the-default-workflow">Iterative version of the default workflow</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Author name not set
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, autoplex development team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>